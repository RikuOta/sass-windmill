@import './windmill';

// Override default settings.
$wm-breakpoints: (
    all: 0,
    pc: 769px
);
$wm-breakpoint-placeholder: SCR;
$wm-value-placeholder: VAL;
$wm-min-breakpoint-prefix: false;
$wm-min-breakpoint-addition: 1;

// Test preference.
$valid-test-nums: 0, 1;
$is-all-test-valid: false;

$current-test-num: 0 !default;
@mixin test_windmill($args...) {
    @if $is-all-test-valid {
        @include windmill($args...) {
            @content;
        }
    } @else {
        @each $valid-test-num in $valid-test-nums {
            @if $valid-test-num == $current-test-num {
                @include windmill($args...) {
                    @content;
                }
            }
        }
    }
    $current-test-num: $current-test-num + 1 !global;
}

$test_values: (
    1: 1rem,
    2: -1rem,
    3: test,
    4: "test"
);

/* ------------------------------
Omit the breakpoint-placeholder
------------------------------ */
.test {
    @include test_windmill() {
        display: block;
    }
}

.test-VAL {
    @include test_windmill(
        $declarations: (margin: '$val$'),
        $values: ('$val$': $test_values)
    );
}

/* ------------------------------
Take $selector without breakpoints
------------------------------ */
@include test_windmill(
    $selector: '.test',
    $breakpoints: false
) {
    margin: 0
}

/* ------------------------------
Take $selector with breakpoints
------------------------------ */

@include test_windmill(
    $selector: '.SCR-test',
    $breakpoints: $wm-breakpoints
) {
    margin: 0
}

/* ------------------------------
Use @content without breakpoints
------------------------------ */
.test {
    @include test_windmill(
        $breakpoints: false
    ) {
        margin: 0
    }
}

/* ------------------------------
Use @content with breakpoints
------------------------------ */
.SCR-test {
    @include test_windmill(
        $breakpoints: $wm-breakpoints
    ) {
        margin: 0
    }
}

/* ------------------------------
Take $declarations without breakpoints
------------------------------ */
.test {
    @include test_windmill(
        $declarations: (margin: 0),
        $breakpoints: false
    );
}

/* ------------------------------
Take $declarations with breakpoints
------------------------------ */
.SCR-test {
    @include test_windmill(
        $declarations: (margin: 0),
        $breakpoints: $wm-breakpoints
    );
}

/* ------------------------------
Use value-variable without breakpoints
------------------------------ */
.test-VAL {
    @include test_windmill(
        $declarations: (margin: '$val$'),
        $values: ('$val$': $test_values),
        $breakpoints: false
    );
}

/* ------------------------------
Use value-variable with breakpoints
------------------------------ */
.SCR-test-VAL {
    @include test_windmill(
        $declarations: (margin: '$val$'),
        $values: ('$val$': $test_values),
        $breakpoints: $wm-breakpoints
    );
}

/* ------------------------------
Mixed with value-variable, without breakpoints
------------------------------ */
.test-VAL {
    @include test_windmill(
        $declarations: (margin: '$val$'),
        $values: ('$val$': $test_values),
        $breakpoints: false
    ) {
        content: 'foo'
    }
}

/* ------------------------------
Mixed with value-variable, with breakpoints
------------------------------ */
.SCR-test-VAL {
    @include test_windmill(
        $declarations: (margin: '$val$'),
        $values: ('$val$': $test_values),
        $breakpoints: $wm-breakpoints
    ) {
        content: 'foo'
    }
}

/* ------------------------------
Use value-variable as part
------------------------------ */
.test-VAL {
    @include test_windmill(
        $declarations: (margin: 0 '$val$' 0 0),
        $values: ('$val$': $test_values),
        $breakpoints: false
    );
}

/* ------------------------------
Use value-variable with negative unit
------------------------------ */
.test-VAL {
    @include test_windmill(
        $declarations: (margin: -'$val$'),
        $values: ('$val$': $test_values),
        $breakpoints: false
    );
}

/* ------------------------------
Use shorthand
------------------------------ */
.SCR-test-VAL {
    @include test_windmill(margin, $test_values);
}

/* ------------------------------
Use shorthand with important frag
------------------------------ */
.SCR-test-VAL {
    @include test_windmill((margin, true), $test_values);
}